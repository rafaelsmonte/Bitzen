CREATE TABLE [user]
(
 [id]    int IDENTITY (1, 1) NOT NULL ,
 [email] nvarchar(100) NOT NULL ,
 [senha] nvarchar(100) NOT NULL ,
 [nome]  nvarchar(100) NOT NULL ,


 CONSTRAINT [PK_user] PRIMARY KEY CLUSTERED ([id] ASC)
);
GO

CREATE TABLE [veiculos]
(
 [id]                int IDENTITY (1, 1) NOT NULL ,
 [marca]             varchar(50) NOT NULL ,
 [modelo]            varchar(100) NOT NULL ,
 [ano]               int NOT NULL ,
 [placa]             varchar(7) NOT NULL ,
 [TipoDoVeiculo]     varchar(50) NOT NULL ,
 [TipoDeCombustivel] varchar(50) NOT NULL ,
 [KM]                int NOT NULL ,
 [ResponsavelId]     int NOT NULL ,


 CONSTRAINT [PK_veiculos] PRIMARY KEY CLUSTERED ([id] ASC),
 CONSTRAINT [FK_26] FOREIGN KEY ([ResponsavelId])  REFERENCES [user]([id])
);
GO


CREATE NONCLUSTERED INDEX [fkIdx_26] ON [veiculos] 
 (
  [ResponsavelId] ASC
 )

GO


CREATE TABLE [Abastecimentos]
(
 [id]                  int IDENTITY (1, 1) NOT NULL ,
 [VeiculoId]           int NOT NULL ,
 [KmDoAbastecimento]   int NOT NULL ,
 [ValorPago]           float NOT NULL ,
 [DataDoAbastecimento] datetime NOT NULL ,
 [Posto]               varchar(100) NOT NULL ,
 [ResponsavelId]       int NOT NULL ,


 CONSTRAINT [PK_abastecimentos] PRIMARY KEY CLUSTERED ([id] ASC),
 CONSTRAINT [FK_29] FOREIGN KEY ([VeiculoId])  REFERENCES [veiculos]([id]),
 CONSTRAINT [FK_36] FOREIGN KEY ([ResponsavelId])  REFERENCES [user]([id])
);
GO


CREATE NONCLUSTERED INDEX [fkIdx_29] ON [Abastecimentos] 
 (
  [VeiculoId] ASC
 )

GO

CREATE NONCLUSTERED INDEX [fkIdx_36] ON [Abastecimentos] 
 (
  [ResponsavelId] ASC
 )

GO


ALTER TABLE Abastecimentos ADD CONSTRAINT DF_Abastecimentos DEFAULT GETDATE() FOR DataDoAbastecimento